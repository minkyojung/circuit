# v1 UI ìƒì„¸ ëª…ì„¸ì„œ

## ê°œìš”

v1ì—ì„œ êµ¬í˜„í•  ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸ì˜ ìƒì„¸ ëª…ì„¸ì…ë‹ˆë‹¤.

---

## ì „ì²´ êµ¬ì¡°

```
Workspace í™”ë©´
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (ê¸°ì¡´)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PlanTopBar (NEW! - ì ‘ê¸° ê°€ëŠ¥)                           â”‚  â† ì¶”ê°€
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ConversationTabs (ê¸°ì¡´ + ìˆ˜ì •)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ChatPanel (ê¸°ì¡´)                                        â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modal (Overlay):
- PlanModeModal (Cmd+Shift+Pë¡œ ì—´ë¦¼)
- PlanDetailModal (Optional, Top Barì—ì„œ ì—´ë¦¼)
```

---

## 1. PlanModeModal (í”Œëœ ìƒì„± Modal)

### 1.1 ê°œìš”

**ëª©ì :** AIì™€ ëŒ€í™”í•˜ë©° SimpleBranchPlan ìƒì„±

**íŠ¸ë¦¬ê±°:**
- `Cmd+Shift+P` (í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤)
- Chatì—ì„œ "Plan Mode" ë²„íŠ¼ í´ë¦­
- í° ìš”ì²­ ì‹œ AIê°€ ìë™ ì œì•ˆ

**í¬ê¸°:** Full-screen overlay (ë°°ê²½ dimmed)

### 1.2 ë‹¨ê³„ë³„ í™”ë©´

#### **Stage 1: ìœ ì € ì…ë ¥**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ§  ë¸Œëœì¹˜ í”Œëœ ìƒì„±                       â”‚
â”‚                                        [ESCë¡œ ì·¨ì†Œ]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  ë¬´ì—‡ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì„¸ìš”?                                  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OAuth ì¸ì¦ êµ¬í˜„ (Googleê³¼ GitHub)                  â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ [Cmd+Enterë¡œ ì œì¶œ]                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  ë˜ëŠ”:                                                    â”‚
â”‚  [ì˜ˆì œ ë³´ê¸°]                                              â”‚
â”‚    - "ì‚¬ìš©ì í”„ë¡œí•„ í˜ì´ì§€ ë§Œë“¤ê¸°"                        â”‚
â”‚    - "ê²°ì œ ì‹œìŠ¤í…œ êµ¬í˜„"                                   â”‚
â”‚    - "ì„±ëŠ¥ ìµœì í™”"                                        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<PlanModeModal>
  <Stage1_UserInput
    onSubmit={handleUserInput}
    onCancel={closeModal}
  />
</PlanModeModal>
```

**ìƒíƒœ:**
```typescript
{
  stage: 'user-input' | 'ai-analysis' | 'ai-questions' | 'preview',
  userInput: string,
  aiQuestions: Question[],
  userAnswers: Map<string, any>,
  generatedPlan: SimpleBranchPlan | null
}
```

---

#### **Stage 2: AI ë¶„ì„ ì¤‘**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ§  ë¸Œëœì¹˜ í”Œëœ ìƒì„±                       â”‚
â”‚                                        [ESCë¡œ ì·¨ì†Œ]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  ìš”ì²­: "OAuth ì¸ì¦ êµ¬í˜„ (Googleê³¼ GitHub)"                â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  AIê°€ ë¶„ì„ ì¤‘...                                          â”‚
â”‚                                                           â”‚
â”‚  â³ Codebase êµ¬ì¡° ë¶„ì„ ì¤‘...                              â”‚
â”‚     - í”„ë ˆì„ì›Œí¬: Express.js ê°ì§€                         â”‚
â”‚     - DB: PostgreSQL í™•ì¸                                 â”‚
â”‚     - Auth: ê¸°ì¡´ passport.js ì‚¬ìš© ì¤‘                      â”‚
â”‚                                                           â”‚
â”‚  â³ ê´€ë ¨ íŒŒì¼ ì°¾ëŠ” ì¤‘...                                  â”‚
â”‚     - src/auth/*.ts                                       â”‚
â”‚     - src/models/User.ts                                  â”‚
â”‚     - migrations/*.sql                                    â”‚
â”‚                                                           â”‚
â”‚  â³ ì‘ì—… ë¶„í•´ ì¤‘...                                       â”‚
â”‚                                                           â”‚
â”‚  [ì§„í–‰ë„: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%]                        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<Stage2_AIAnalysis
  progress={40}
  steps={[
    { text: 'Codebase êµ¬ì¡° ë¶„ì„', status: 'completed' },
    { text: 'ê´€ë ¨ íŒŒì¼ ì°¾ëŠ” ì¤‘', status: 'in-progress' },
    { text: 'ì‘ì—… ë¶„í•´ ì¤‘', status: 'pending' }
  ]}
/>
```

**ì• ë‹ˆë©”ì´ì…˜:**
- Progress bar: smooth width transition
- Steps: fade in ìˆœì°¨ì ìœ¼ë¡œ
- Spinner: rotating animation

---

#### **Stage 3: AI ì§ˆë¬¸ (ëª…í™•í™”)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ§  ë¸Œëœì¹˜ í”Œëœ ìƒì„±                       â”‚
â”‚                                        [ESCë¡œ ì·¨ì†Œ]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  ìš”ì²­: "OAuth ì¸ì¦ êµ¬í˜„ (Googleê³¼ GitHub)"                â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  ğŸ’¬ ëª…í™•íˆ í•  ì§ˆë¬¸ì´ ìˆìŠµë‹ˆë‹¤:                            â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  Q1: ì–´ë–¤ OAuth ì œê³µìë¥¼ í†µí•©í•˜ì‹œë‚˜ìš”?                    â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [âœ“] Google                                          â”‚ â”‚
â”‚  â”‚ [âœ“] GitHub                                          â”‚ â”‚
â”‚  â”‚ [ ] Facebook                                        â”‚ â”‚
â”‚  â”‚ [ ] Apple                                           â”‚ â”‚
â”‚  â”‚ [ ] ê¸°íƒ€: ___________                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  Q2: SSO (Single Sign-On)ê°€ í•„ìš”í•œê°€ìš”?                  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ( ) ì˜ˆ, ì§€ê¸ˆ êµ¬í˜„                                   â”‚ â”‚
â”‚  â”‚ (â—) ì•„ë‹ˆì˜¤                                          â”‚ â”‚
â”‚  â”‚ ( ) ë‚˜ì¤‘ì— ì¶”ê°€ ì˜ˆì •                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  Q3: ê¸°ì¡´ ì‚¬ìš©ì ê³„ì •ê³¼ ì—°ë™í•´ì•¼ í•˜ë‚˜ìš”?                 â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ (â—) ì˜ˆ, ì´ë©”ì¼ë¡œ ì—°ë™                               â”‚ â”‚
â”‚  â”‚ ( ) ì•„ë‹ˆì˜¤, ë…ë¦½ì ì¸ ê³„ì •                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  ì§ˆë¬¸ 3/3                            [ì´ì „] [ë‹¤ìŒ (Enter)]â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<Stage3_AIQuestions
  questions={[
    {
      id: 'q1',
      text: 'ì–´ë–¤ OAuth ì œê³µìë¥¼ í†µí•©í•˜ì‹œë‚˜ìš”?',
      type: 'multi-select',
      options: ['Google', 'GitHub', 'Facebook', 'Apple'],
      required: true
    },
    {
      id: 'q2',
      text: 'SSOê°€ í•„ìš”í•œê°€ìš”?',
      type: 'single-select',
      options: ['ì˜ˆ, ì§€ê¸ˆ', 'ì•„ë‹ˆì˜¤', 'ë‚˜ì¤‘ì—'],
      required: true
    }
  ]}
  answers={userAnswers}
  onAnswerChange={handleAnswerChange}
  onNext={handleNext}
  onPrevious={handlePrevious}
/>
```

**ì§ˆë¬¸ íƒ€ì…:**
```typescript
type QuestionType =
  | 'single-select'   // ë¼ë””ì˜¤ ë²„íŠ¼
  | 'multi-select'    // ì²´í¬ë°•ìŠ¤
  | 'text'            // í…ìŠ¤íŠ¸ ì…ë ¥
  | 'number'          // ìˆ«ì ì…ë ¥

interface Question {
  id: string
  text: string
  type: QuestionType
  options?: string[]
  placeholder?: string
  required: boolean
  defaultValue?: any
}
```

**í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜:**
- `Enter`: ë‹¤ìŒ ì§ˆë¬¸
- `Shift+Enter`: ì´ì „ ì§ˆë¬¸
- `Space`: ì„ íƒ/í•´ì œ (ì²´í¬ë°•ìŠ¤)
- `â†‘/â†“`: ì˜µì…˜ ê°„ ì´ë™

---

#### **Stage 4: í”Œëœ ë¯¸ë¦¬ë³´ê¸° & í¸ì§‘**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ“‹ ë¸Œëœì¹˜ í”Œëœ ë¯¸ë¦¬ë³´ê¸°                   â”‚
â”‚                              [Cmd+Eë¡œ í¸ì§‘] [ESCë¡œ ì·¨ì†Œ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  ëª©í‘œ: OAuth ì¸ì¦ êµ¬í˜„ (Google & GitHub)     [âœï¸ í¸ì§‘]   â”‚
â”‚                                                           â”‚
â”‚  ğŸ“Š ìš”ì•½                                                  â”‚
â”‚    Conversations: 4ê°œ                                     â”‚
â”‚    ì´ Todos: 12ê°œ                                         â”‚
â”‚    ì˜ˆìƒ ì‹œê°„: 6ì‹œê°„                                       â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ Conversation 1: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ      [â–¼]     â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ëª©í‘œ: OAuthìš© DB í…Œì´ë¸” ì„¤ê³„ ë° ìƒì„±                â”‚ â”‚
â”‚  â”‚ ì˜ˆìƒ ì‹œê°„: 1ì‹œê°„                                    â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ ì˜ˆìƒ ì‚°ì¶œë¬¼:  â† v1ì—ì„œ íŒíŠ¸ë¡œë§Œ í‘œì‹œ                â”‚ â”‚
â”‚  â”‚   â€¢ migrations/001_add_oauth_fields.sql             â”‚ â”‚
â”‚  â”‚   â€¢ ìˆ˜ì •ëœ User ëª¨ë¸                                â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ Todos:                                              â”‚ â”‚
â”‚  â”‚   1. users í…Œì´ë¸”ì— oauth_provider, oauth_id ì¶”ê°€  â”‚ â”‚
â”‚  â”‚      ë³µì¡ë„: Simple | ì˜ˆìƒ: 30ë¶„                    â”‚ â”‚
â”‚  â”‚   2. migration íŒŒì¼ ìƒì„± (up/down)                  â”‚ â”‚
â”‚  â”‚      ë³µì¡ë„: Simple | ì˜ˆìƒ: 15ë¶„                    â”‚ â”‚
â”‚  â”‚   3. User ëª¨ë¸ ì—…ë°ì´íŠ¸                             â”‚ â”‚
â”‚  â”‚      ë³µì¡ë„: Simple | ì˜ˆìƒ: 15ë¶„                    â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ [í¸ì§‘] [ì‚­ì œ] [â†‘] [â†“]                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ Conversation 2: ë°±ì—”ë“œ API               [â–¶]     â”‚ â”‚
â”‚  â”‚ 3 todos Â· 2ì‹œê°„ ì˜ˆìƒ               [í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ Conversation 3: í”„ë¡ íŠ¸ì—”ë“œ UI            [â–¶]     â”‚ â”‚
â”‚  â”‚ 4 todos Â· 2ì‹œê°„ ì˜ˆìƒ                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“‹ Conversation 4: í†µí•© í…ŒìŠ¤íŠ¸              [â–¶]     â”‚ â”‚
â”‚  â”‚ 3 todos Â· 1ì‹œê°„ ì˜ˆìƒ                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  [+ Conversation ì¶”ê°€]                                    â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚       [ì·¨ì†Œ]  [ì €ì¥ë§Œ]  [ìŠ¹ì¸ & Conversation ìƒì„±]       â”‚
â”‚                                  (Cmd+Enter)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<Stage4_PlanPreview
  plan={generatedPlan}
  onEdit={handleEdit}
  onApprove={handleApprove}
  onSave={handleSave}
  onCancel={closeModal}
/>

<ConversationPreviewCard
  conversation={convPlan}
  isExpanded={expandedIds.has(convPlan.id)}
  onToggle={handleToggle}
  onEdit={handleEditConversation}
  onDelete={handleDeleteConversation}
  onMoveUp={handleMoveUp}
  onMoveDown={handleMoveDown}
/>
```

**ì¸í„°ë™ì…˜:**
- **[â–¼] í´ë¦­**: Conversation í¼ì¹˜ê¸°
- **[â–¶] í´ë¦­**: Conversation ì ‘ê¸°
- **[í¸ì§‘]**: Inline í¸ì§‘ ëª¨ë“œë¡œ ì „í™˜
- **[ì‚­ì œ]**: í™•ì¸ í›„ ì‚­ì œ
- **[â†‘][â†“]**: ìˆœì„œ ë³€ê²½

**í¸ì§‘ ëª¨ë“œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ [ì œëª© í¸ì§‘: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ__________]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ëª©í‘œ: [OAuthìš© DB í…Œì´ë¸” ì„¤ê³„_______________]       â”‚
â”‚                                                     â”‚
â”‚ ì˜ˆìƒ ì‹œê°„: [1] ì‹œê°„                                 â”‚
â”‚                                                     â”‚
â”‚ Todos:                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ 1. [users í…Œì´ë¸”ì— ì»¬ëŸ¼ ì¶”ê°€________]     â”‚    â”‚
â”‚   â”‚    ë³µì¡ë„: [Simple â–¼]                     â”‚    â”‚
â”‚   â”‚    ì˜ˆìƒ: [30] ë¶„                          â”‚    â”‚
â”‚   â”‚    [â†‘] [â†“] [âœ•]                            â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚   [+ Todo ì¶”ê°€]                                     â”‚
â”‚                                                     â”‚
â”‚ ì˜ˆìƒ ì‚°ì¶œë¬¼:                                        â”‚
â”‚   â€¢ [migrations/001_add_oauth_fields.sql]           â”‚
â”‚   [+ ì‚°ì¶œë¬¼ ì¶”ê°€]                                   â”‚
â”‚                                                     â”‚
â”‚ [ì €ì¥] [ì·¨ì†Œ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒíƒœ ê´€ë¦¬:**
```typescript
interface PlanPreviewState {
  plan: SimpleBranchPlan
  expandedConversations: Set<string>
  editingConversation: string | null
  editingTodo: string | null
}
```

---

### 1.3 ë°ì´í„° íë¦„

```
User Input (Stage 1)
    â†“
AI Analysis (Stage 2)
    â†“
AI Questions (Stage 3)
    â†“
User Answers
    â†“
AI generates SimpleBranchPlan
    â†“
Preview & Edit (Stage 4)
    â†“
User Approves
    â†“
Save to DB
    â†“
Create Conversations & Todos
    â†“
Close Modal & Show Top Bar
```

**IPC Calls:**
```typescript
// Stage 2: AI ë¶„ì„ ì‹œì‘
ipcRenderer.invoke('plan:analyze', {
  userInput: "OAuth ì¸ì¦ êµ¬í˜„",
  workspaceId: workspace.id
})

// Stage 3: AI ì§ˆë¬¸ ë°›ê¸°
â†’ { questions: Question[] }

// User answers ì œì¶œ
ipcRenderer.invoke('plan:generate', {
  userInput: "...",
  answers: { q1: ['Google', 'GitHub'], q2: 'no' }
})

// Stage 4: í”Œëœ ë°›ê¸°
â†’ { plan: SimpleBranchPlan }

// ìŠ¹ì¸
ipcRenderer.invoke('plan:execute', {
  plan: editedPlan
})
```

---

## 2. PlanTopBar (ì§„í–‰ë„ í‘œì‹œ Bar)

### 2.1 ê°œìš”

**ëª©ì :**
- í˜„ì¬ í™œì„± í”Œëœì˜ ì „ì²´ ì§„í–‰ë„ í‘œì‹œ
- Conversation ê°„ ë¹ ë¥¸ ì „í™˜
- í”Œëœ ê´€ë¦¬ (í¸ì§‘, ìƒì„¸ë³´ê¸°)

**ìœ„ì¹˜:** ConversationTabs ìœ„

**í¬ê¸°:**
- ì ‘íŒ ìƒíƒœ: 32px ë†’ì´
- í¼ì¹œ ìƒíƒœ: ìµœëŒ€ 200px ë†’ì´

### 2.2 ì ‘íŒ ìƒíƒœ (ê¸°ë³¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ OAuth ì¸ì¦ êµ¬í˜„           40% â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   [í¼ì¹˜ê¸° â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<PlanTopBar collapsed={true}>
  <div className="flex items-center justify-between px-4">
    {/* ì™¼ìª½: í”Œëœ ì œëª© & ì§„í–‰ë„ */}
    <div className="flex items-center gap-3">
      <span className="text-sm font-medium">
        ğŸ“‹ {plan.goal}
      </span>

      <ProgressIndicator
        value={40}
        max={100}
        className="w-32"
      />

      <span className="text-xs text-muted">
        40%
      </span>
    </div>

    {/* ì˜¤ë¥¸ìª½: ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
    <div className="flex items-center gap-2">
      <ConversationQuickNav
        conversations={plan.conversations}
        activeId={activeConversationId}
        onSelect={handleConversationSelect}
      />

      <Button
        variant="ghost"
        size="sm"
        onClick={toggleExpand}
      >
        í¼ì¹˜ê¸° â–¼
      </Button>
    </div>
  </div>
</PlanTopBar>
```

**ConversationQuickNav (ë¯¸ë‹ˆ ì•„ì´ì½˜ë“¤):**
```
[âœ“] [â–¶] [â–¡] [â–¡]
 DB  API  UI  Test
```

**í˜¸ë²„ ì‹œ:**
```
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ âœ“ DB ìŠ¤í‚¤ë§ˆ     â”‚
      â”‚ (ì™„ë£Œ)          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[âœ“] [â–¶] [â–¡] [â–¡]
```

---

### 2.3 í¼ì¹œ ìƒíƒœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ OAuth ì¸ì¦ êµ¬í˜„           40% â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   [ì ‘ê¸° â–²]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Status â”‚ Conversation      â”‚ Progress â”‚ Time    â”‚    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â”‚ âœ“      â”‚ DB ìŠ¤í‚¤ë§ˆ         â”‚ 3/3 âœ“    â”‚ 1h      â”‚ [â†’]â”‚
â”‚ â”‚ â–¶      â”‚ ë°±ì—”ë“œ API        â”‚ 2/3      â”‚ 1.2h/2h â”‚ [â†’]â”‚
â”‚ â”‚ â–¡      â”‚ í”„ë¡ íŠ¸ UI         â”‚ 0/4      â”‚ 0/2h    â”‚ [â†’]â”‚
â”‚ â”‚ â–¡      â”‚ í…ŒìŠ¤íŠ¸            â”‚ 0/3      â”‚ 0/1h    â”‚ [â†’]â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚ ì „ì²´ ì§„í–‰ë„: 5/13 todos ì™„ë£Œ (38%)                      â”‚
â”‚ ì†Œìš” ì‹œê°„: 2.2h / 6h ì˜ˆìƒ                               â”‚
â”‚ ë‚¨ì€ ì‹œê°„: ~3.8h                                        â”‚
â”‚                                                         â”‚
â”‚ [í”Œëœ ìƒì„¸ë³´ê¸°] [í¸ì§‘] [ì™„ë£Œ ì²˜ë¦¬]                      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<PlanTopBar collapsed={false}>
  <div className="p-4">
    {/* Header with collapse button */}
    <div className="flex justify-between items-center mb-3">
      <h3>{plan.goal}</h3>
      <Button onClick={toggleExpand}>ì ‘ê¸° â–²</Button>
    </div>

    {/* Conversation table */}
    <ConversationTable
      conversations={plan.conversations}
      activeId={activeConversationId}
      onSelect={handleSelect}
    />

    {/* Summary */}
    <PlanSummary
      totalTodos={13}
      completedTodos={5}
      timeSpent="2.2h"
      timeEstimated="6h"
      timeRemaining="3.8h"
    />

    {/* Actions */}
    <div className="flex gap-2 mt-3">
      <Button onClick={openDetailModal}>í”Œëœ ìƒì„¸ë³´ê¸°</Button>
      <Button onClick={openEditModal}>í¸ì§‘</Button>
      <Button onClick={markAsComplete}>ì™„ë£Œ ì²˜ë¦¬</Button>
    </div>
  </div>
</PlanTopBar>
```

**[â†’] ë²„íŠ¼ í´ë¦­:**
- í•´ë‹¹ Conversation tabìœ¼ë¡œ ì´ë™
- ChatPanelì´ í•´ë‹¹ conversation ë¡œë“œ

---

### 2.4 ìƒíƒœ & ì• ë‹ˆë©”ì´ì…˜

**ìƒíƒœ:**
```typescript
interface PlanTopBarState {
  isExpanded: boolean
  plan: SimpleBranchPlan
  progress: {
    completedConversations: number
    totalConversations: number
    completedTodos: number
    totalTodos: number
    percentComplete: number
    timeSpent: number
    timeEstimated: number
  }
}
```

**ì• ë‹ˆë©”ì´ì…˜:**
```tsx
<motion.div
  initial={false}
  animate={{
    height: isExpanded ? 'auto' : '32px'
  }}
  transition={{
    duration: 0.3,
    ease: 'easeInOut'
  }}
>
  {/* content */}
</motion.div>
```

**Progress bar ì• ë‹ˆë©”ì´ì…˜:**
```tsx
<motion.div
  className="bg-primary"
  initial={{ width: 0 }}
  animate={{ width: `${progress.percentComplete}%` }}
  transition={{ duration: 0.5, ease: 'easeOut' }}
/>
```

---

## 3. ConversationTabs ìˆ˜ì •

### 3.1 í˜„ì¬ êµ¬ì¡°

```tsx
// ê¸°ì¡´
<ConversationTabs>
  {conversations.map(conv => (
    <Tab key={conv.id}>{conv.title}</Tab>
  ))}
  <Button>+</Button>
</ConversationTabs>
```

### 3.2 ìˆ˜ì •ì‚¬í•­

**"í”Œëœì—ì„œ ìƒì„±ëœ ê²ƒ" í‘œì‹œ:**

```
[âœ“ DB ìŠ¤í‚¤ë§ˆ] [â–¶ ë°±ì—”ë“œ API] [í”„ë¡ íŠ¸ UI] [ì¼ë°˜ ì‘ì—…]
 â””â”€ í”Œëœ        â””â”€ í”Œëœ         â””â”€ í”Œëœ      â””â”€ ìˆ˜ë™ ìƒì„±
```

**ì»´í¬ë„ŒíŠ¸:**
```tsx
<ConversationTab
  conversation={conv}
  isActive={conv.id === activeId}
  isFromPlan={!!conv.planId}  // â† NEW!
  planStatus={getPlanStatus(conv)}  // â† NEW!
/>
```

**Tab ìŠ¤íƒ€ì¼:**
```tsx
// í”Œëœì—ì„œ ìƒì„±ëœ tab
<div className={cn(
  "relative",
  isFromPlan && "border-b-2 border-blue-500"
)}>
  {planStatus === 'completed' && <CheckIcon />}
  {planStatus === 'in-progress' && <PlayIcon />}
  {title}
</div>

// ìˆ˜ë™ ìƒì„±ëœ tab (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€)
<div>{title}</div>
```

**í˜¸ë²„ íˆ´íŒ:**
```
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ í”Œëœ: OAuth ì¸ì¦ êµ¬í˜„        â”‚
      â”‚ ìƒíƒœ: ì§„í–‰ ì¤‘ (2/3 ì™„ë£Œ)     â”‚
      â”‚ ì˜ˆìƒ ì‹œê°„: 1.2h / 2h         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[â–¶ ë°±ì—”ë“œ API]
```

---

## 4. ChatPanel ìˆ˜ì •

### 4.1 Plan Mode ë²„íŠ¼ ì¶”ê°€

**ìœ„ì¹˜:** ChatInput ìœ„ ë˜ëŠ” Empty State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatPanel                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Messages...                                 â”‚
â”‚                                             â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                             â”‚
â”‚ [ğŸ’¡ í° ì‘ì—…ì´ì‹ ê°€ìš”? Plan Modeë¡œ ì‹œì‘í•˜ê¸°] â”‚  â† NEW!
â”‚                                             â”‚
â”‚ [ì…ë ¥ì°½]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Empty Stateì¼ ë•Œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â”‚              ì‹œì‘í•˜ê¸°                       â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ’¬ ì¼ë°˜ ëŒ€í™”                       â”‚    â”‚
â”‚  â”‚ AIì™€ ììœ ë¡­ê²Œ ëŒ€í™”í•˜ì„¸ìš”           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ§  Plan Mode (ê¶Œì¥)                â”‚    â”‚
â”‚  â”‚ í° ì‘ì—…ì„ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ê³        â”‚    â”‚
â”‚  â”‚ ì²´ê³„ì ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”              â”‚    â”‚
â”‚  â”‚                                    â”‚    â”‚
â”‚  â”‚ [Plan Modeë¡œ ì‹œì‘] (Cmd+Shift+P)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. PlanDetailModal (Optional, ìƒì„¸ë³´ê¸°)

**íŠ¸ë¦¬ê±°:** PlanTopBarì—ì„œ "í”Œëœ ìƒì„¸ë³´ê¸°" í´ë¦­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ğŸ“‹ OAuth ì¸ì¦ êµ¬í˜„ (ìƒì„¸)                 â”‚
â”‚                                           [Cmd+Wë¡œ ë‹«ê¸°]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  [Overview] [Table View] [Board View] [Timeline]          â”‚
â”‚   â†‘ ì„ íƒë¨                                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  ì „ì²´ ì§„í–‰ë„                                              â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40% (5/13 todos)                     â”‚
â”‚                                                           â”‚
â”‚  ì‹œê°„                                                     â”‚
â”‚  ì†Œìš”: 2.2h / ì˜ˆìƒ: 6h / ë‚¨ìŒ: ~3.8h                     â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  Conversations                                            â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ #    â”‚ Title       â”‚ Status   â”‚ Progress â”‚ Time   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 1    â”‚ DB ìŠ¤í‚¤ë§ˆ   â”‚ âœ“ ì™„ë£Œ   â”‚ 3/3      â”‚ 1h     â”‚  â”‚
â”‚  â”‚ 2    â”‚ ë°±ì—”ë“œ API  â”‚ â–¶ ì§„í–‰ì¤‘ â”‚ 2/3      â”‚ 1.2h/2hâ”‚  â”‚
â”‚  â”‚ 3    â”‚ í”„ë¡ íŠ¸ UI   â”‚ â–¡ ëŒ€ê¸°   â”‚ 0/4      â”‚ 0/2h   â”‚  â”‚
â”‚  â”‚ 4    â”‚ í…ŒìŠ¤íŠ¸      â”‚ â–¡ ëŒ€ê¸°   â”‚ 0/3      â”‚ 0/1h   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  ì„ íƒëœ Conversation: ë°±ì—”ë“œ API                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  ëª©í‘œ: Google & GitHub OAuth ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„              â”‚
â”‚                                                           â”‚
â”‚  Todos:                                                   â”‚
â”‚    âœ“ /auth/google/login êµ¬í˜„ (30ë¶„)                       â”‚
â”‚    âœ“ /auth/github/login êµ¬í˜„ (25ë¶„)                       â”‚
â”‚    â–¶ JWT ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„ (ì§„í–‰ ì¤‘...)                       â”‚
â”‚                                                           â”‚
â”‚  ì˜ˆìƒ ì‚°ì¶œë¬¼:                                             â”‚
â”‚    â€¢ api/auth/google.ts                                   â”‚
â”‚    â€¢ api/auth/github.ts                                   â”‚
â”‚    â€¢ api/middleware/jwt.ts                                â”‚
â”‚                                                           â”‚
â”‚  [í•´ë‹¹ Conversationìœ¼ë¡œ ì´ë™]                             â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Board View (Kanban):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Overview] [Table View] [Board View] [Timeline]          â”‚
â”‚                           â†‘ ì„ íƒë¨                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì™„ë£Œ âœ“   â”‚  â”‚ ì§„í–‰ ì¤‘  â”‚  â”‚ ëŒ€ê¸°     â”‚  â”‚ ê³„íš     â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ DB   â”‚ â”‚  â”‚ â”‚ë°±ì—”ë“œâ”‚ â”‚  â”‚ â”‚í”„ë¡ íŠ¸â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ìŠ¤í‚¤ë§ˆâ”‚ â”‚  â”‚ â”‚ API  â”‚ â”‚  â”‚ â”‚ UI   â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚      â”‚ â”‚  â”‚ â”‚      â”‚ â”‚  â”‚ â”‚      â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ 3/3  â”‚ â”‚  â”‚ â”‚ 2/3  â”‚ â”‚  â”‚ â”‚ 0/4  â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â”‚ 1h   â”‚ â”‚  â”‚ â”‚ 1.2h â”‚ â”‚  â”‚ â”‚ 0h   â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚          â”‚ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚ â”‚í…ŒìŠ¤íŠ¸â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚ â”‚ 0/3  â”‚ â”‚  â”‚          â”‚ â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                           â”‚
â”‚  Drag to change status                                    â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ë°ì´í„° êµ¬ì¡°

### 6.1 SimpleBranchPlan

```typescript
interface SimpleBranchPlan {
  id: string
  workspaceId: string

  // ëª©í‘œ
  goal: string                    // "OAuth ì¸ì¦ êµ¬í˜„ (Google & GitHub)"
  description?: string            // ìƒì„¸ ì„¤ëª…

  // Conversations
  conversations: Array<{
    id: string                    // ì„ì‹œ ID (ìƒì„± ì „)
    title: string                 // "ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ"
    goal: string                  // "OAuthìš© DB í…Œì´ë¸” ì„¤ê³„"

    // v1: íŒíŠ¸ë¡œë§Œ (ê²€ì¦ ì•ˆ í•¨)
    expectedOutputs?: string[]    // ["migrations/001_oauth.sql"]

    // Todos
    todos: Array<{
      content: string             // "users í…Œì´ë¸” ì„¤ê³„"
      activeForm?: string         // "í…Œì´ë¸” ì„¤ê³„ ì¤‘"
      complexity?: TodoComplexity // "simple"
      priority?: TodoPriority     // "high"
      estimatedDuration?: number  // 1800 (ì´ˆ)
    }>

    estimatedDuration: number     // 3600 (ì´ˆ)
  }>

  // ë©”íƒ€ë°ì´í„°
  createdAt: number
  createdBy: 'user' | 'ai'
  approvedAt?: number

  // í†µê³„ (ìë™ ê³„ì‚°)
  totalConversations: number      // 4
  totalTodos: number              // 12
  totalEstimatedDuration: number  // 21600 (6ì‹œê°„)
}
```

### 6.2 ì‹¤í–‰ í›„ Conversation

```typescript
interface Conversation {
  id: string
  workspaceId: string
  title: string

  // v1: í”Œëœ ì—°ê²°
  planId?: string                 // SimpleBranchPlan ID
  planConversationIndex?: number  // í”Œëœ ë‚´ ìˆœì„œ

  createdAt: number
  updatedAt: number
  isActive: boolean
}
```

### 6.3 ì§„í–‰ë„ ê³„ì‚°

```typescript
interface PlanProgress {
  // Conversations
  totalConversations: number
  completedConversations: number
  inProgressConversations: number

  // Todos
  totalTodos: number
  completedTodos: number
  inProgressTodos: number

  // Percentage
  percentComplete: number         // 0-100

  // Time
  estimatedDuration: number       // ì´ ì˜ˆìƒ ì‹œê°„ (ì´ˆ)
  actualDuration: number          // ì‹¤ì œ ì†Œìš” ì‹œê°„ (ì´ˆ)
  remainingDuration: number       // ë‚¨ì€ ì˜ˆìƒ ì‹œê°„ (ì´ˆ)
}

function calculatePlanProgress(
  plan: SimpleBranchPlan,
  conversations: Conversation[],
  todos: Todo[]
): PlanProgress {
  // í”Œëœì— ì†í•œ conversation IDs
  const planConversationIds = conversations
    .filter(c => c.planId === plan.id)
    .map(c => c.id)

  // í”Œëœì— ì†í•œ todos
  const planTodos = todos.filter(t =>
    planConversationIds.includes(t.conversationId)
  )

  const completedTodos = planTodos.filter(t => t.status === 'completed')
  const inProgressTodos = planTodos.filter(t => t.status === 'in_progress')

  // Conversationë³„ ì™„ë£Œ ì—¬ë¶€
  const conversationProgress = planConversationIds.map(convId => {
    const convTodos = planTodos.filter(t => t.conversationId === convId)
    const allCompleted = convTodos.every(t => t.status === 'completed')
    const hasInProgress = convTodos.some(t => t.status === 'in_progress')

    return {
      conversationId: convId,
      isCompleted: allCompleted,
      isInProgress: hasInProgress && !allCompleted
    }
  })

  const completedConversations = conversationProgress.filter(c => c.isCompleted).length
  const inProgressConversations = conversationProgress.filter(c => c.isInProgress).length

  const percentComplete = Math.round(
    (completedTodos.length / planTodos.length) * 100
  )

  const actualDuration = completedTodos.reduce(
    (sum, t) => sum + (t.actualDuration || 0),
    0
  )

  return {
    totalConversations: planConversationIds.length,
    completedConversations,
    inProgressConversations,
    totalTodos: planTodos.length,
    completedTodos: completedTodos.length,
    inProgressTodos: inProgressTodos.length,
    percentComplete,
    estimatedDuration: plan.totalEstimatedDuration,
    actualDuration,
    remainingDuration: plan.totalEstimatedDuration - actualDuration
  }
}
```

---

## 7. IPC Handlers (Backend)

### 7.1 Plan CRUD

```typescript
// 1. Plan ë¶„ì„ ì‹œì‘
ipcMain.handle('plan:analyze', async (event, params: {
  userInput: string
  workspaceId: string
}) => {
  // Claudeì—ê²Œ codebase ë¶„ì„ ìš”ì²­
  const analysis = await analyzeCodebase(params.workspaceId)

  // ì§ˆë¬¸ ìƒì„±
  const questions = await generateQuestions(params.userInput, analysis)

  return {
    success: true,
    analysis,
    questions
  }
})

// 2. Plan ìƒì„±
ipcMain.handle('plan:generate', async (event, params: {
  userInput: string
  answers: Record<string, any>
  workspaceId: string
}) => {
  // Claudeì—ê²Œ í”Œëœ ìƒì„± ìš”ì²­
  const plan = await generateSimpleBranchPlan(params)

  return {
    success: true,
    plan
  }
})

// 3. Plan ì‹¤í–‰ (Conversations ìƒì„±)
ipcMain.handle('plan:execute', async (event, params: {
  plan: SimpleBranchPlan
}) => {
  const { plan } = params

  // 1. DBì— í”Œëœ ì €ì¥
  await storage.saveSimpleBranchPlan(plan)

  // 2. Conversations ìƒì„±
  const createdConversations = []

  for (const [index, convPlan] of plan.conversations.entries()) {
    // Conversation ìƒì„±
    const conversation = await storage.createConversation({
      workspaceId: plan.workspaceId,
      title: convPlan.title,
      planId: plan.id,
      planConversationIndex: index
    })

    createdConversations.push(conversation)

    // Todos ìƒì„±
    for (const [order, todoDraft] of convPlan.todos.entries()) {
      await storage.createTodo({
        conversationId: conversation.id,
        messageId: '', // í”Œëœì—ì„œ ìƒì„±ëœ todoëŠ” message ì—†ìŒ
        content: todoDraft.content,
        activeForm: todoDraft.activeForm,
        status: 'pending',
        priority: todoDraft.priority,
        complexity: todoDraft.complexity,
        estimatedDuration: todoDraft.estimatedDuration,
        order,
        depth: 0,
        thinkingStepIds: [],
        blockIds: [],
        createdAt: Date.now(),
        updatedAt: Date.now()
      })
    }
  }

  return {
    success: true,
    planId: plan.id,
    conversations: createdConversations
  }
})

// 4. Plan ì¡°íšŒ
ipcMain.handle('plan:get', async (event, workspaceId: string) => {
  const plan = await storage.getActivePlanByWorkspace(workspaceId)

  if (!plan) {
    return { success: false, error: 'No active plan' }
  }

  // ì§„í–‰ë„ ê³„ì‚°
  const conversations = await storage.getConversationsByWorkspace(workspaceId)
  const todos = await storage.getTodosByPlan(plan.id)
  const progress = calculatePlanProgress(plan, conversations, todos)

  return {
    success: true,
    plan,
    progress
  }
})

// 5. Plan ì—…ë°ì´íŠ¸
ipcMain.handle('plan:update', async (event, params: {
  planId: string
  updates: Partial<SimpleBranchPlan>
}) => {
  await storage.updateSimpleBranchPlan(params.planId, params.updates)

  return { success: true }
})

// 6. Plan ì™„ë£Œ ì²˜ë¦¬
ipcMain.handle('plan:complete', async (event, planId: string) => {
  await storage.updateSimpleBranchPlan(planId, {
    completedAt: Date.now()
  })

  return { success: true }
})
```

---

## 8. React Hooks

### 8.1 useBranchPlan

```typescript
interface UseBranchPlanReturn {
  plan: SimpleBranchPlan | null
  progress: PlanProgress | null
  isLoading: boolean
  error: Error | null

  // Actions
  createPlan: (userInput: string) => Promise<void>
  executePlan: (plan: SimpleBranchPlan) => Promise<void>
  updatePlan: (updates: Partial<SimpleBranchPlan>) => Promise<void>
  completePlan: () => Promise<void>
}

export function useBranchPlan(workspaceId: string): UseBranchPlanReturn {
  const [plan, setPlan] = useState<SimpleBranchPlan | null>(null)
  const [progress, setProgress] = useState<PlanProgress | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  // í”Œëœ ë¡œë“œ
  useEffect(() => {
    if (!workspaceId) return

    loadPlan()
  }, [workspaceId])

  const loadPlan = async () => {
    try {
      setIsLoading(true)
      const result = await ipcRenderer.invoke('plan:get', workspaceId)

      if (result.success) {
        setPlan(result.plan)
        setProgress(result.progress)
      }
    } catch (err) {
      setError(err as Error)
    } finally {
      setIsLoading(false)
    }
  }

  const createPlan = async (userInput: string) => {
    // PlanModeModalì—ì„œ ì‚¬ìš©
    // Modal ë‚´ë¶€ì—ì„œ ë‹¨ê³„ë³„ë¡œ ì§„í–‰
  }

  const executePlan = async (plan: SimpleBranchPlan) => {
    try {
      const result = await ipcRenderer.invoke('plan:execute', { plan })

      if (result.success) {
        await loadPlan() // ì¬ë¡œë“œ
      }
    } catch (err) {
      setError(err as Error)
      throw err
    }
  }

  const updatePlan = async (updates: Partial<SimpleBranchPlan>) => {
    if (!plan) return

    try {
      await ipcRenderer.invoke('plan:update', {
        planId: plan.id,
        updates
      })

      await loadPlan()
    } catch (err) {
      setError(err as Error)
      throw err
    }
  }

  const completePlan = async () => {
    if (!plan) return

    try {
      await ipcRenderer.invoke('plan:complete', plan.id)
      await loadPlan()
    } catch (err) {
      setError(err as Error)
      throw err
    }
  }

  return {
    plan,
    progress,
    isLoading,
    error,
    createPlan,
    executePlan,
    updatePlan,
    completePlan
  }
}
```

### 8.2 usePlanProgress (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)

```typescript
export function usePlanProgress(
  plan: SimpleBranchPlan | null
): PlanProgress | null {
  const [progress, setProgress] = useState<PlanProgress | null>(null)

  // Conversationê³¼ Todo ë³€ê²½ ê°ì§€
  useEffect(() => {
    if (!plan) {
      setProgress(null)
      return
    }

    // ì´ˆê¸° ë¡œë“œ
    calculateProgress()

    // Todo ìƒíƒœ ë³€ê²½ ë¦¬ìŠ¤ë„ˆ
    const unsubscribe = ipcRenderer.on('todo:updated', calculateProgress)

    return () => {
      unsubscribe()
    }
  }, [plan])

  const calculateProgress = async () => {
    if (!plan) return

    const result = await ipcRenderer.invoke('plan:get-progress', plan.id)

    if (result.success) {
      setProgress(result.progress)
    }
  }

  return progress
}
```

---

## 9. í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

```typescript
// Global shortcuts
const shortcuts = {
  // Plan Mode
  'Cmd+Shift+P': openPlanModeModal,

  // Top Bar
  'Cmd+Shift+H': togglePlanTopBar,

  // Navigation
  'Cmd+1~9': switchToConversationN,
  'Cmd+[': previousConversation,
  'Cmd+]': nextConversation,

  // Plan actions
  'Cmd+Shift+L': openPlanDetailModal,
  'Cmd+E': editPlan,

  // Modal
  'Cmd+W': closeModal,
  'ESC': closeModal,
  'Cmd+Enter': approveAndExecute
}
```

---

## 10. ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### 10.1 ìƒ‰ìƒ

```typescript
const colors = {
  // Status
  completed: 'hsl(142, 76%, 36%)',    // ë…¹ìƒ‰
  inProgress: 'hsl(217, 91%, 60%)',   // íŒŒë€ìƒ‰
  pending: 'hsl(215, 20%, 65%)',      // íšŒìƒ‰
  failed: 'hsl(0, 72%, 51%)',         // ë¹¨ê°„ìƒ‰

  // Progress bar
  progressFill: 'hsl(217, 91%, 60%)',
  progressBg: 'hsl(215, 20%, 95%)',

  // Plan
  planBorder: 'hsl(217, 91%, 60%)',
  planBg: 'hsl(217, 91%, 97%)'
}
```

### 10.2 ì•„ì´ì½˜

```typescript
const icons = {
  completed: 'âœ“',
  inProgress: 'â–¶',
  pending: 'â–¡',
  failed: 'âœ•',
  warning: 'âš ',

  plan: 'ğŸ“‹',
  conversation: 'ğŸ’¬',
  todo: 'âœ“',
  time: 'â±',
  progress: 'ğŸ“Š'
}
```

---

## 11. ì—ëŸ¬ ì²˜ë¦¬

### 11.1 Plan ìƒì„± ì‹¤íŒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ í”Œëœ ìƒì„± ì‹¤íŒ¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚ AIê°€ í”Œëœì„ ìƒì„±í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.  â”‚
â”‚                                               â”‚
â”‚ ì˜¤ë¥˜: "Codebase ë¶„ì„ ì‹¤íŒ¨ - íŒŒì¼ ì ‘ê·¼ ê±°ë¶€"   â”‚
â”‚                                               â”‚
â”‚ í•´ê²° ë°©ë²•:                                    â”‚
â”‚ 1. ë” êµ¬ì²´ì ì¸ ìš”ì²­ìœ¼ë¡œ ë²”ìœ„ ì¢íˆê¸°           â”‚
â”‚ 2. ê´€ë ¨ íŒŒì¼/í´ë”ë¥¼ ì§ì ‘ ì§€ì •í•˜ê¸°             â”‚
â”‚ 3. ìˆ˜ë™ìœ¼ë¡œ Conversation ìƒì„±í•˜ê¸°             â”‚
â”‚                                               â”‚
â”‚ [ë‹¤ì‹œ ì‹œë„] [ìˆ˜ë™ìœ¼ë¡œ ì‘ì„±]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 Conversation ìƒì„± ì‹¤íŒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ì¼ë¶€ Conversation ìƒì„± ì‹¤íŒ¨                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚ 4ê°œ ì¤‘ 3ê°œë§Œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.                  â”‚
â”‚                                               â”‚
â”‚ ì‹¤íŒ¨í•œ Conversation:                          â”‚
â”‚ â€¢ "í†µí•© í…ŒìŠ¤íŠ¸" (DB ì—°ê²° ì˜¤ë¥˜)                â”‚
â”‚                                               â”‚
â”‚ [ì‹¤íŒ¨í•œ ê²ƒë§Œ ë‹¤ì‹œ ì‹œë„]                       â”‚
â”‚ [3ê°œë¡œ ì§„í–‰]                                  â”‚
â”‚ [ì „ì²´ ì·¨ì†Œ]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. ì„±ëŠ¥ ìµœì í™”

### 12.1 Progressive Loading

```tsx
// í”Œëœ ë¯¸ë¦¬ë³´ê¸°: ì²« 2ê°œë§Œ í¼ì¹¨
<PlanPreview>
  <ConversationCard expanded={index < 2} />
</PlanPreview>

// ë‚˜ë¨¸ì§€ëŠ” í´ë¦­ ì‹œ ë¡œë“œ
```

### 12.2 Virtual Scrolling

```tsx
// Conversationì´ 20ê°œ ì´ìƒì¼ ë•Œ
import { useVirtualizer } from '@tanstack/react-virtual'

<VirtualList
  items={plan.conversations}
  estimateSize={() => 100}
  renderItem={(conv) => <ConversationCard />}
/>
```

### 12.3 Debounced Progress Update

```typescript
// Todo ìƒíƒœê°€ ìì£¼ ë°”ë€” ë•Œ progress ê³„ì‚°ì„ debounce
const debouncedUpdateProgress = useMemo(
  () => debounce(calculateProgress, 500),
  []
)
```

---

## 13. ì ‘ê·¼ì„± (A11y)

### 13.1 í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜

```typescript
// Modal ë‚´ë¶€
- Tab: ë‹¤ìŒ í•„ë“œë¡œ
- Shift+Tab: ì´ì „ í•„ë“œë¡œ
- Enter: ì œì¶œ
- ESC: ì·¨ì†Œ

// PlanTopBar
- Space: í¼ì¹˜ê¸°/ì ‘ê¸°
- Arrow keys: Conversation ê°„ ì´ë™
```

### 13.2 ARIA Labels

```tsx
<PlanTopBar
  role="region"
  aria-label="ë¸Œëœì¹˜ í”Œëœ ì§„í–‰ë„"
  aria-expanded={isExpanded}
>
  <ProgressBar
    role="progressbar"
    aria-valuenow={progress.percentComplete}
    aria-valuemin={0}
    aria-valuemax={100}
    aria-label={`ì§„í–‰ë„ ${progress.percentComplete}%`}
  />
</PlanTopBar>
```

### 13.3 ìŠ¤í¬ë¦° ë¦¬ë”

```tsx
<ConversationCard>
  <VisuallyHidden>
    Conversation {index + 1} of {total}:
    {title}.
    Status: {status}.
    Progress: {completedTodos} of {totalTodos} todos completed.
  </VisuallyHidden>

  {/* Visual content */}
</ConversationCard>
```

---

## 14. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 14.1 Happy Path

```
1. Workspace ì—´ê¸°
2. Cmd+Shift+P
3. "OAuth ì¸ì¦ êµ¬í˜„" ì…ë ¥
4. AI ì§ˆë¬¸ì— ë‹µë³€
5. í”Œëœ ë¯¸ë¦¬ë³´ê¸° í™•ì¸
6. [ìŠ¹ì¸ & ìƒì„±]
7. Top Bar í™•ì¸ (ì§„í–‰ë„ 0%)
8. ì²« ë²ˆì§¸ Conversation tab í™•ì¸
9. Todo ì‹¤í–‰
10. Top Bar ì—…ë°ì´íŠ¸ í™•ì¸
11. ëª¨ë“  Conversation ì™„ë£Œ
12. Top Barì—ì„œ "ì™„ë£Œ!" í‘œì‹œ
```

### 14.2 í¸ì§‘ ì‹œë‚˜ë¦¬ì˜¤

```
1. í”Œëœ ë¯¸ë¦¬ë³´ê¸°ì—ì„œ [í¸ì§‘]
2. Conversation 1 í¼ì¹˜ê¸°
3. Todo ì¶”ê°€
4. Conversation ìˆœì„œ ë³€ê²½ (â†‘â†“)
5. [ì €ì¥]
6. ë‹¤ì‹œ ë¯¸ë¦¬ë³´ê¸° í™•ì¸
7. [ìŠ¹ì¸ & ìƒì„±]
```

### 14.3 ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤

```
1. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì¤‘ í”Œëœ ìƒì„±
   â†’ ì¬ì‹œë„ ë˜ëŠ” ì˜¤í”„ë¼ì¸ ëª¨ë“œ
2. DB ì˜¤ë¥˜ ì¤‘ Conversation ìƒì„±
   â†’ ë¶€ë¶„ ìƒì„± & ì¬ì‹œë„
3. í”Œëœ ì‹¤í–‰ ì¤‘ ì·¨ì†Œ
   â†’ ë¡¤ë°±
```

---

## 15. ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### 15.1 ê¸°ì¡´ Conversations

```typescript
// ê¸°ì¡´ conversationë“¤ì€ planId ì—†ì´ ìœ ì§€
Conversation {
  id: "conv-123",
  title: "ì¼ë°˜ ì‘ì—…",
  planId: null  // â† í”Œëœ ì—†ìŒ
}

// í”Œëœì—ì„œ ìƒì„±ëœ conversation
Conversation {
  id: "conv-456",
  title: "DB ìŠ¤í‚¤ë§ˆ",
  planId: "plan-789",  // â† í”Œëœ ì—°ê²°
  planConversationIndex: 0
}
```

### 15.2 DB Schema ë³€ê²½

```sql
-- 1. simple_branch_plans í…Œì´ë¸” ì¶”ê°€
CREATE TABLE simple_branch_plans (
  id TEXT PRIMARY KEY,
  workspace_id TEXT NOT NULL,
  goal TEXT NOT NULL,
  description TEXT,
  conversations TEXT NOT NULL,  -- JSON
  created_at INTEGER NOT NULL,
  created_by TEXT NOT NULL,
  approved_at INTEGER,
  total_conversations INTEGER NOT NULL,
  total_todos INTEGER NOT NULL,
  total_estimated_duration INTEGER NOT NULL,
  completed_at INTEGER,
  FOREIGN KEY (workspace_id) REFERENCES workspaces(id)
);

-- 2. conversations í…Œì´ë¸” í™•ì¥
ALTER TABLE conversations ADD COLUMN plan_id TEXT REFERENCES simple_branch_plans(id);
ALTER TABLE conversations ADD COLUMN plan_conversation_index INTEGER;

CREATE INDEX idx_conversations_plan ON conversations(plan_id);
```

---

## ìš”ì•½

### ìƒˆë¡œ ì¶”ê°€í•  ì»´í¬ë„ŒíŠ¸ (5ê°œ)

1. **PlanModeModal** - í”Œëœ ìƒì„± Modal (4 stages)
2. **PlanTopBar** - ì§„í–‰ë„ í‘œì‹œ Bar (ì ‘ê¸° ê°€ëŠ¥)
3. **PlanDetailModal** - ìƒì„¸ë³´ê¸° Modal (Optional)
4. **ConversationPreviewCard** - í”Œëœ ë¯¸ë¦¬ë³´ê¸°ìš©
5. **PlanProgress** - ì§„í–‰ë„ ê³„ì‚° ì»´í¬ë„ŒíŠ¸

### ìˆ˜ì •í•  ì»´í¬ë„ŒíŠ¸ (3ê°œ)

1. **ConversationTabs** - í”Œëœ ì†Œì† í‘œì‹œ
2. **ChatPanel** - Plan Mode ë²„íŠ¼ ì¶”ê°€
3. **WorkspaceChatEditor** - Top Bar í†µí•©

### ìƒˆë¡œ ì¶”ê°€í•  Hooks (2ê°œ)

1. **useBranchPlan** - í”Œëœ ìƒíƒœ ê´€ë¦¬
2. **usePlanProgress** - ì§„í–‰ë„ ê³„ì‚° & ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

### ìƒˆë¡œ ì¶”ê°€í•  IPC Handlers (6ê°œ)

1. `plan:analyze`
2. `plan:generate`
3. `plan:execute`
4. `plan:get`
5. `plan:update`
6. `plan:complete`

### êµ¬í˜„ ìˆœì„œ (4ì£¼)

**Week 1:** PlanModeModal (ê¸°ë³¸) + DB
**Week 2:** PlanTopBar (ì ‘íŒ ìƒíƒœ)
**Week 3:** í¸ì§‘ ê¸°ëŠ¥ + PlanTopBar (í¼ì¹¨)
**Week 4:** ìƒì„¸ë³´ê¸° + ë§ˆë¬´ë¦¬

---

## Implementation Progress

### âœ… Phase 1: Foundation (Completed)

**Date:** 2025-01-13

#### 1. Type Definitions
- âœ… Created `octave/src/types/plan.ts`
  - SimpleBranchPlan interface
  - PlanStatus, PlanCreationStage types
  - AIQuestion, PlanProgress interfaces
  - All request/result types for IPC

#### 2. Database Schema
- âœ… Updated `octave/electron/conversationStorage.ts`
  - Migration v7: SimpleBranchPlan support
  - Created `simple_branch_plans` table with all fields
  - Added `plan_id` column to `conversations` table
  - Created indexes for efficient lookups
  - Implemented Plan CRUD methods:
    - `createPlan()`, `getPlanById()`, `getPlansByWorkspaceId()`
    - `getActivePlanByWorkspaceId()`, `updatePlan()`, `deletePlan()`
    - `getConversationsByPlanId()`, `updateConversationPlanId()`

#### 3. React Hooks
- âœ… Created `octave/src/hooks/useBranchPlan.ts`
  - Plan lifecycle management (analyze, generate, execute)
  - Plan CRUD operations
  - Real-time IPC event synchronization
  - Active plan tracking per workspace

- âœ… Created `octave/src/hooks/usePlanProgress.ts`
  - Real-time progress calculation
  - Todo/Conversation completion tracking
  - Time estimates and efficiency metrics
  - Auto-refresh every 30 seconds

#### 4. Updated Types
- âœ… Updated `octave/src/types/conversation.ts`
  - Added `planId?: string` field to Conversation interface

#### 5. Project Structure
- âœ… Created `octave/src/components/plan/` directory for Plan components

### ğŸš§ Phase 2: Next Steps (Pending)

#### UI Components (Not Started)
- â¸ï¸ PlanModeModal component (4 stages)
- â¸ï¸ PlanTopBar component
- â¸ï¸ PlanDetailModal component (optional)
- â¸ï¸ Integration with ConversationTabs
- â¸ï¸ Integration with ChatPanel
- â¸ï¸ Integration with WorkspaceChatEditor

#### Backend IPC Handlers (Not Started)
- â¸ï¸ `plan:analyze` - AI analysis of user goal
- â¸ï¸ `plan:generate` - Generate plan from answers
- â¸ï¸ `plan:execute` - Create conversations from plan
- â¸ï¸ `plan:get-active` - Get active plan for workspace
- â¸ï¸ `plan:get-all` - Get all plans for workspace
- â¸ï¸ `plan:get-conversations` - Get plan conversations
- â¸ï¸ `plan:get-todos` - Get todos for conversations
- â¸ï¸ `plan:update` - Update plan
- â¸ï¸ `plan:delete` - Delete plan

### Changed Files Summary

```
New Files:
- octave/src/types/plan.ts
- octave/src/hooks/useBranchPlan.ts
- octave/src/hooks/usePlanProgress.ts

Modified Files:
- octave/src/types/conversation.ts
- octave/electron/conversationStorage.ts

Created Directories:
- octave/src/components/plan/
```

---

**ë‹¤ìŒ ë‹¨ê³„:**
1. IPC handlers êµ¬í˜„ (Electron main process)
2. PlanModeModal UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ
3. PlanTopBar UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ
4. í†µí•© ë° í…ŒìŠ¤íŠ¸
