# Branch Plan UI 제안서

## 개요

v1 "강력한 플랜 모드"를 위한 UI 설계 제안서입니다. 여러 제품의 UI 패턴을 조사하고, Octave에 최적화된 하이브리드 방식을 제안합니다.

---

## 조사한 제품들

### 1. GitHub Actions Visual Builders

**제품:** Actionforge, PipelineUI, FlowForge

**핵심 패턴:**
- Node-based flow interface
- Drag-and-drop workflow 구성
- Dependency graph 시각화
- YAML 숨기고 visual 표현
- Canvas 중심 UI

**적용 포인트:**
- v2에서 conversation 간 의존성 시각화에 활용
- 플랜을 시각적으로 표현

### 2. Linear

**핵심 패턴:**
- Initiative → Project → Issue 계층
- 단순하고 빠른 UI (성능 집착)
- 여러 뷰: Table, Board, Timeline
- Project 페이지에서 진행도 표시
- Minimal chrome, 키보드 중심

**적용 포인트:**
- BranchPlan → Conversation → Todo 계층
- 빠른 전환, 키보드 단축키
- 여러 뷰 제공

### 3. Notion

**핵심 패턴:**
- Database view types (Table, Board, Timeline, List, Gallery)
- Sub-items로 계층 구조
- Progressive disclosure (펼치기/접기)
- Filtered/grouped views
- Inline 편집

**적용 포인트:**
- Conversation을 여러 방식으로 보기
- 플랜 inline 편집
- Progressive disclosure로 복잡도 숨기기

### 4. Cursor AI Plan Mode

**핵심 패턴:**
- **Shift+Tab으로 Plan Mode 진입**
- AI가 연구 → 질문 → 플랜 생성
- **Markdown 파일로 플랜 저장**
- **Inline 편집 가능**
- Agent/Ask mode 분리

**적용 포인트:**
- Plan Mode 진입 단축키 (Cmd+Shift+P)
- Markdown으로 플랜 표현
- 편집 가능한 플랜

### 5. Workflow Orchestration Tools

**제품:** Windmill, Kestra, Activepieces

**핵심 패턴:**
- Code + No-code 하이브리드
- Visual builder + YAML/JSON
- Centralized dashboard
- Real-time execution tracking

**적용 포인트:**
- AI 생성 + 유저 편집
- Dashboard로 전체 진행도

---

## UI 옵션 비교

| 옵션 | 장점 | 단점 | 구현 난이도 | 사용 시나리오 |
|------|------|------|------------|--------------|
| **1. Minimal Extension** | 기존 UI 유지, 간단 | 플랜 가시성 낮음 | 낮음 (1주) | 빠른 MVP |
| **2. Split-Pane** | 항상 보임, 직관적 | 화면 분할 | 중간 (2주) | 넓은 화면, 빈번한 전환 |
| **3. Modal-Based** | 집중 가능, 공간 절약 | Modal 피로도 | 중간 (1.5주) | 플랜 편집 중심 |
| **4. Dedicated View** | 전용 공간, 다양한 뷰 | 화면 전환 필요 | 높음 (3주) | 여러 플랜 관리 |
| **5. Hybrid Sidebar** | 선택적 가시성 | Sidebar 혼잡 | 중간 (2주) | VS Code 스타일 선호 |

---

## 제안: "Progressive Disclosure" 하이브리드

**컨셉:**
- 평소엔 Minimal (Option 1)
- 플랜 생성 시 Modal (Option 3)
- 실행 중엔 Collapsible Panel (Option 2 변형)

### Phase 1: 플랜 생성 (Modal)

**트리거:**
- Cmd+Shift+P (또는 Shift+Tab)
- Chat에서 "Plan Mode" 버튼 클릭
- 큰 요청 시 AI가 자동 제안

**UI:**
```
┌───────────────────────────────────────────────────────────────┐
│                   🧠 브랜치 플랜 생성                          │
│                                           [Cmd+W로 취소]       │
├───────────────────────────────────────────────────────────────┤
│                                                               │
│  Step 1/3: AI가 요구사항 분석 중                              │
│                                                               │
│  ⏳ Codebase 분석 중...                                       │
│  ⏳ 관련 파일 찾는 중...                                      │
│  ⏳ 작업 분해 중...                                           │
│                                                               │
│  💬 명확히 할 질문이 있습니다:                                │
│                                                               │
│  Q1: 어떤 OAuth 제공자를 사용하시나요?                        │
│  [ ] Google                                                   │
│  [ ] GitHub                                                   │
│  [ ] 둘 다                                                    │
│  [ ] 기타: _______________                                    │
│                                                               │
│  Q2: SSO가 필요한가요?                                        │
│  ( ) 예                                                       │
│  (●) 아니오                                                   │
│  ( ) 나중에                                                   │
│                                                               │
│                                  [다음 (Enter)]               │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

**Step 2: 플랜 미리보기 & 편집**
```
┌───────────────────────────────────────────────────────────────┐
│                   📋 브랜치 플랜 미리보기                      │
│                                      [Cmd+E로 편집] [Cmd+W로 취소]│
├───────────────────────────────────────────────────────────────┤
│                                                               │
│  목표: OAuth 인증 구현 (Google & GitHub)      [✏️ 편집]      │
│                                                               │
│  📊 요약                                                      │
│    Conversations: 4개                                         │
│    총 Todos: 12개                                             │
│    예상 시간: 6시간 (순차) → 4시간 (병렬 가능)               │
│                                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                               │
│  ┌─────────────────────────────────────────────────────┐     │
│  │ 📋 Conversation 1: 데이터베이스 스키마       [▼]    │     │
│  ├─────────────────────────────────────────────────────┤     │
│  │ 목표: OAuth용 DB 테이블 설계 및 생성                │     │
│  │ 예상 시간: 1시간                                    │     │
│  │                                                     │     │
│  │ Todos:                                              │     │
│  │   1. users 테이블 스키마 설계                       │     │
│  │      (email, oauth_provider, oauth_id 컬럼 포함)    │     │
│  │   2. migration 파일 생성                            │     │
│  │      (up/down 메서드)                               │     │
│  │                                                     │     │
│  │ 산출물:                                             │     │
│  │   - migrations/001_oauth_users.sql                  │     │
│  │                                                     │     │
│  │ [편집] [삭제] [위로] [아래로]                       │     │
│  └─────────────────────────────────────────────────────┘     │
│                                                               │
│  ┌─────────────────────────────────────────────────────┐     │
│  │ 📋 Conversation 2: 백엔드 API                [▶]    │     │
│  │ 3 todos · 2시간 예상              [클릭하여 펼치기] │     │
│  └─────────────────────────────────────────────────────┘     │
│                                                               │
│  ┌─────────────────────────────────────────────────────┐     │
│  │ 📋 Conversation 3: 프론트엔드 UI             [▶]    │     │
│  │ 4 todos · 2시간 예상                                │     │
│  └─────────────────────────────────────────────────────┘     │
│                                                               │
│  ┌─────────────────────────────────────────────────────┐     │
│  │ 📋 Conversation 4: 통합 테스트               [▶]    │     │
│  │ 3 todos · 1시간 예상                                │     │
│  └─────────────────────────────────────────────────────┘     │
│                                                               │
│  [+ Conversation 추가]                                        │
│                                                               │
├───────────────────────────────────────────────────────────────┤
│  [취소]  [저장만 하기]  [승인 & Conversation 생성] (Cmd+Enter)│
└───────────────────────────────────────────────────────────────┘
```

**편집 모드 (Conversation 펼침):**
```
┌───────────────────────────────────────────────────────────────┐
│  ┌─────────────────────────────────────────────────────┐     │
│  │ 📋 Conversation 1: 데이터베이스 스키마       [▲]    │     │
│  ├─────────────────────────────────────────────────────┤     │
│  │ 제목: [데이터베이스 스키마_____________]  (편집 가능)│     │
│  │                                                     │     │
│  │ 목표:                                               │     │
│  │ [OAuth용 DB 테이블 설계 및 생성_______________]     │     │
│  │ [________________________________________]          │     │
│  │                                                     │     │
│  │ 예상 시간: [1] 시간                                 │     │
│  │                                                     │     │
│  │ Todos:                                              │     │
│  │   ┌───────────────────────────────────────────┐    │     │
│  │   │ 1. [users 테이블 스키마 설계__________]   │    │     │
│  │   │    설명: [email, oauth_provider...]       │    │     │
│  │   │    예상: [30] 분                          │    │     │
│  │   │    [↑] [↓] [✕]                            │    │     │
│  │   └───────────────────────────────────────────┘    │     │
│  │                                                     │     │
│  │   ┌───────────────────────────────────────────┐    │     │
│  │   │ 2. [migration 파일 생성_______________]    │    │     │
│  │   │    [↑] [↓] [✕]                            │    │     │
│  │   └───────────────────────────────────────────┘    │     │
│  │                                                     │     │
│  │   [+ Todo 추가]                                     │     │
│  │                                                     │     │
│  │ 산출물:                                             │     │
│  │   ☐ File: [migrations/001_oauth_users.sql___]      │     │
│  │   [+ 산출물 추가]                                   │     │
│  │                                                     │     │
│  │ [저장] [취소]                                       │     │
│  └─────────────────────────────────────────────────────┘     │
└───────────────────────────────────────────────────────────────┘
```

### Phase 2: 실행 중 (Collapsible Top Bar)

**승인 후 자동으로 conversation 생성되고, 평소 뷰로 돌아옴:**

```
┌───────────────────────────────────────────────────────────────┐
│ [Workspace: feature-auth]                                     │
│                                                               │
│ ┌───────────────────────────────────────────────────────────┐│
│ │ 📋 OAuth 인증 구현                        40% ████░░░░░░ ││
│ │ [DB ✓] [API ▶] [UI □] [Test □]            [펼치기 ▼]    ││
│ └───────────────────────────────────────────────────────────┘│
│                                                               │
├───────────────────────────────────────────────────────────────┤
│ Conversations:                                                │
│ [DB 스키마 ✓] [백엔드 API ▶] [프론트 UI] [테스트]            │
│                                                               │
│ (현재: 백엔드 API)                                            │
│                                                               │
│ User: "/auth/login 엔드포인트 구현해줘"                       │
│                                                               │
│ AI: 네, 구현하겠습니다...                                     │
│                                                               │
│ [Todo]                                                        │
│ ✓ /auth/login 구현                                            │
│ ▶ /auth/register 구현 중...                                   │
│ □ JWT 미들웨어                                                │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

**Top Bar 펼친 상태:**
```
┌───────────────────────────────────────────────────────────────┐
│ [Workspace: feature-auth]                                     │
│                                                               │
│ ┌───────────────────────────────────────────────────────────┐│
│ │ 📋 OAuth 인증 구현                        40% ████░░░░░░ ││
│ │                                              [접기 ▲]     ││
│ ├───────────────────────────────────────────────────────────┤│
│ │                                                           ││
│ │ ✓ Conversation 1: DB 스키마 (완료)           1h      [→]││
│ │ ▶ Conversation 2: 백엔드 API (2/3 완료)      1.2h/2h  [→]││
│ │ □ Conversation 3: 프론트 UI (대기)           0/2h     [→]││
│ │ □ Conversation 4: 테스트 (대기)             0/1h     [→]││
│ │                                                           ││
│ │ 남은 시간: ~2.5시간                                       ││
│ │                                                           ││
│ │ [플랜 상세보기] [편집] [완료 처리]                        ││
│ └───────────────────────────────────────────────────────────┘│
│                                                               │
├───────────────────────────────────────────────────────────────┤
│ (Chat 계속...)                                                │
└───────────────────────────────────────────────────────────────┘
```

### Phase 3: 플랜 상세보기 (Optional Modal)

**"플랜 상세보기" 클릭 시:**
```
┌───────────────────────────────────────────────────────────────┐
│                 📋 OAuth 인증 구현 (상세)                     │
│                                                  [Cmd+W로 닫기]│
├───────────────────────────────────────────────────────────────┤
│                                                               │
│  [Table View] [Board View] [Timeline View]                    │
│                                                               │
│  진행도: ████████░░░░░░░░░░ 40% (5/12 todos)                 │
│  소요 시간: 2.5h / 6h                                         │
│                                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                               │
│  ┌──────────┬──────────────────┬─────────┬──────────────┐    │
│  │ Status   │ Conversation     │ Todos   │ Duration     │    │
│  ├──────────┼──────────────────┼─────────┼──────────────┤    │
│  │ ✓        │ DB 스키마        │ 2/2 ✓   │ 1h (완료)    │ [→]│
│  │ ▶        │ 백엔드 API       │ 2/3     │ 1.2h / 2h    │ [→]│
│  │ □        │ 프론트 UI        │ 0/4     │ 0 / 2h       │ [→]│
│  │ □        │ 테스트           │ 0/3     │ 0 / 1h       │ [→]│
│  └──────────┴──────────────────┴─────────┴──────────────┘    │
│                                                               │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                               │
│  📋 Conversation 2: 백엔드 API (펼침)                         │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                               │
│  Todos:                                                       │
│    ✓ /auth/login 구현 (30분)                                  │
│    ✓ /auth/register 구현 (25분)                               │
│    ▶ JWT 미들웨어 (진행 중...)                                │
│                                                               │
│  산출물:                                                      │
│    ✓ api/auth/login.ts (생성됨, 검증 완료)                    │
│    ✓ api/auth/register.ts (생성됨, 검증 완료)                 │
│    ⏳ api/auth/middleware.ts (대기 중)                        │
│                                                               │
│  [Conversation으로 이동]                                      │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

**Board View:**
```
┌───────────────────────────────────────────────────────────────┐
│                 📋 OAuth 인증 구현 (Board View)               │
├───────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐     │
│  │ 완료 ✓   │  │ 진행 중  │  │ 대기     │  │ 계획     │     │
│  ├──────────┤  ├──────────┤  ├──────────┤  ├──────────┤     │
│  │          │  │          │  │          │  │          │     │
│  │ ┌──────┐ │  │ ┌──────┐ │  │ ┌──────┐ │  │          │     │
│  │ │ DB   │ │  │ │백엔드│ │  │ │프론트│ │  │          │     │
│  │ │스키마│ │  │ │ API  │ │  │ │ UI   │ │  │          │     │
│  │ │      │ │  │ │      │ │  │ │      │ │  │          │     │
│  │ │ 2/2  │ │  │ │ 2/3  │ │  │ │ 0/4  │ │  │          │     │
│  │ │ 1h   │ │  │ │ 1.2h │ │  │ │ 0h   │ │  │          │     │
│  │ └──────┘ │  │ └──────┘ │  │ └──────┘ │  │          │     │
│  │          │  │          │  │          │  │          │     │
│  │          │  │          │  │ ┌──────┐ │  │          │     │
│  │          │  │          │  │ │테스트│ │  │          │     │
│  │          │  │          │  │ │ 0/3  │ │  │          │     │
│  │          │  │          │  │ │ 0h   │ │  │          │     │
│  │          │  │          │  │ └──────┘ │  │          │     │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘     │
│                                                               │
│  Drag to change status                                        │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

---

## 키보드 단축키

### 플랜 생성 & 관리
- `Cmd+Shift+P`: Plan Mode 진입 (플랜 생성 시작)
- `Cmd+E`: 플랜 편집 모드
- `Cmd+Enter`: 플랜 승인 & Conversation 생성
- `Cmd+W`: Modal 닫기
- `Esc`: 취소

### 네비게이션
- `Cmd+1~9`: Conversation 1~9로 이동
- `Cmd+[`: 이전 Conversation
- `Cmd+]`: 다음 Conversation
- `Cmd+Shift+L`: 플랜 상세보기 열기
- `Cmd+Shift+H`: Top Bar 펼치기/접기

### 편집
- `Cmd+N`: 새 Conversation 추가
- `Cmd+Delete`: Conversation 삭제
- `Cmd+↑/↓`: Conversation 순서 변경
- `Enter`: Todo 편집 시작
- `Tab`: 다음 필드로 이동

---

## 상태 표시

### Conversation 상태 아이콘
- `✓`: 완료
- `▶`: 진행 중
- `□`: 대기
- `⏸`: 일시정지
- `✕`: 실패
- `⚠`: 경고 (일부 산출물 미검증)

### 진행도 색상
- **완료 (녹색)**: `████████████`
- **진행 중 (파란색)**: `████████░░░░`
- **경고 (노란색)**: `████⚠⚠⚠░░░░`
- **실패 (빨간색)**: `████✕✕✕✕░░░░`

### Todo 상태
- `✓`: 완료
- `▶`: 진행 중
- `□`: 대기
- `⏸`: 일시정지
- `✕`: 실패
- `↻`: 재시도 중

---

## 반응형 디자인

### Wide Screen (>1400px)
```
┌────────────┬──────────────────────────────────────┐
│ Sidebar    │ Main Content                         │
│ (250px)    │                                      │
│            │ Top Bar: Plan Overview (펼침 가능)   │
│            │                                      │
│            │ Conversation Chat                    │
│            │                                      │
│            │                                      │
└────────────┴──────────────────────────────────────┘
```

### Medium Screen (1000-1400px)
```
┌────┬──────────────────────────────────────────┐
│Side│ Main Content                             │
│bar │                                          │
│    │ Top Bar: Compact (접힘 기본)             │
│    │                                          │
│    │ Conversation Chat                        │
│    │                                          │
└────┴──────────────────────────────────────────┘
```

### Small Screen (<1000px)
```
┌──────────────────────────────────────────────┐
│ [☰] Workspace                                │
│                                              │
│ Top Bar: Minimal (아이콘만)                  │
│ [✓] [▶] [□] [□]                              │
│                                              │
│ Conversation Chat                            │
│                                              │
│                                              │
└──────────────────────────────────────────────┘
```

---

## 애니메이션 & 인터랙션

### Modal 진입/퇴장
- Fade in + Slide up (200ms, ease-out)
- Fade out + Slide down (150ms, ease-in)

### Top Bar 펼치기/접기
- Height transition (300ms, ease-in-out)
- Smooth expand/collapse

### Conversation 상태 변경
- Color transition (200ms)
- Icon morph (150ms)

### 진행도 바
- Width transition (400ms, ease-out)
- Percentage number count-up animation

### Drag & Drop (Board View)
- Card lift shadow
- Drop zone highlight
- Snap animation (200ms)

---

## 구현 우선순위

### Phase 1 (Week 1-2): 핵심 기능
- [ ] Plan Mode 진입 (Cmd+Shift+P)
- [ ] AI 플랜 생성 UI (Modal)
- [ ] 플랜 미리보기 (편집 없이)
- [ ] 승인 & Conversation 생성
- [ ] Top Bar (접힘 상태만)

### Phase 2 (Week 3): 편집 기능
- [ ] 플랜 inline 편집
- [ ] Conversation 추가/삭제
- [ ] Todo 추가/삭제/순서 변경
- [ ] 산출물 명세 편집

### Phase 3 (Week 4): 진행도 추적
- [ ] Top Bar 펼치기/접기
- [ ] 실시간 진행도 업데이트
- [ ] Conversation 상태 표시
- [ ] Todo 완료 체크

### Phase 4 (Optional): 고급 기능
- [ ] 플랜 상세보기 Modal
- [ ] Board View
- [ ] Timeline View
- [ ] 키보드 단축키 전체

---

## 기술 스택 제안

### UI 컴포넌트
- **Modal**: Radix UI Dialog
- **Collapse/Expand**: Radix UI Collapsible
- **Drag & Drop**: dnd-kit
- **Progress Bar**: 커스텀 (framer-motion)
- **Forms**: react-hook-form

### 애니메이션
- **Framer Motion**: Modal, Top Bar, 진행도
- **CSS Transitions**: 간단한 상태 변경

### 상태 관리
- **Zustand**: Plan state (현재 편집 중인 플랜)
- **React Query**: Plan CRUD (서버 상태)

### 렌더링 최적화
- **React.memo**: Conversation Card
- **useMemo**: 진행도 계산
- **Virtualization**: Conversation 리스트 (많을 때)

---

## 사용자 플로우 예시

### 시나리오 1: 새 기능 개발

```
1. 유저: Cmd+Shift+P 누름
   → Plan Mode Modal 열림

2. 유저: "사용자 프로필 페이지 만들기" 입력

3. AI:
   - Codebase 분석
   - 질문: "아바타 업로드 필요?" → 유저: "네"
   - 플랜 생성

4. Modal에 플랜 표시:
   - Conv 1: 데이터 모델
   - Conv 2: 백엔드 API
   - Conv 3: 프론트엔드
   - Conv 4: 테스트

5. 유저: 플랜 검토
   - Conv 2 펼쳐서 todo 확인
   - "프로필 이미지 최적화" todo 추가

6. 유저: Cmd+Enter (승인)
   → Modal 닫힘
   → 4개 Conversation 자동 생성
   → Top Bar에 플랜 요약 표시

7. 유저: Conv 1 tab 클릭
   → "시작해줘" 입력
   → AI가 todo 실행

8. Conv 1 완료
   → Top Bar에서 ✓ 표시
   → 자동으로 Conv 2로 전환 제안

9. 전체 완료 후
   → Top Bar에 "완료!" 표시
   → 플랜을 히스토리로 보관
```

### 시나리오 2: 플랜 중간 수정

```
1. 유저: Conv 2 진행 중
   → 새로운 요구사항 발견

2. 유저: Top Bar 펼치기 클릭
   → [편집] 버튼 클릭

3. 편집 Modal 열림 (현재 플랜 로드됨)

4. 유저:
   - Conv 5 추가 "성능 최적화"
   - Todo 추가

5. 저장
   → Conv 5 생성됨
   → Top Bar 업데이트

6. 계속 진행
```

---

## 접근성 (A11y)

### 키보드 네비게이션
- 모든 기능 키보드로 접근 가능
- Tab order 논리적
- Focus indicator 명확

### 스크린 리더
- ARIA labels
- Live regions (진행도 업데이트)
- Semantic HTML

### 색상 대비
- WCAG AAA 준수
- Color-blind 친화적
- High contrast mode 지원

---

## 다국어 지원

### UI 문구
- 영어/한국어 동시 지원
- i18n 라이브러리 사용

### 플랜 내용
- AI 응답은 사용자 언어로
- Todo는 사용자가 작성한 언어로

---

## 에러 처리

### 플랜 생성 실패
```
┌───────────────────────────────────────────────┐
│ ⚠️ 플랜 생성 실패                             │
├───────────────────────────────────────────────┤
│                                               │
│ AI가 플랜을 생성하는 중 오류가 발생했습니다.  │
│                                               │
│ 오류: "Codebase가 너무 커서 분석할 수 없음"   │
│                                               │
│ 해결 방법:                                    │
│ 1. 더 구체적인 요청으로 범위 좁히기           │
│ 2. 관련 파일 직접 지정하기                    │
│ 3. 작은 단위로 나눠서 요청하기                │
│                                               │
│ [다시 시도] [수동으로 작성]                   │
└───────────────────────────────────────────────┘
```

### Conversation 생성 실패
```
┌───────────────────────────────────────────────┐
│ ⚠️ 일부 Conversation 생성 실패                │
├───────────────────────────────────────────────┤
│                                               │
│ 4개 중 3개만 생성되었습니다.                  │
│                                               │
│ 실패한 Conversation:                          │
│ - "통합 테스트" (DB 연결 오류)                │
│                                               │
│ [실패한 것만 다시 시도]                       │
│ [3개로 진행]                                  │
│ [전체 취소]                                   │
└───────────────────────────────────────────────┘
```

---

## 성능 목표

### 플랜 생성
- AI 응답: < 5초 (대부분의 경우)
- Modal 렌더링: < 100ms
- 플랜 저장: < 500ms

### Conversation 생성
- 4개 Conversation: < 2초
- 각 Conversation의 Todo 생성: < 1초

### UI 반응성
- Modal 열기/닫기: < 200ms
- Top Bar 펼치기/접기: < 300ms
- 상태 업데이트: < 100ms

---

## 데이터 흐름

```
Plan Mode 진입
    ↓
유저 요청 → AI 분석 → 질문 → 유저 답변
    ↓
AI 플랜 생성 → SimpleBranchPlan JSON
    ↓
Modal에 표시 → 유저 편집 (optional)
    ↓
승인
    ↓
┌─────────────────────────────────────┐
│ DB에 SimpleBranchPlan 저장           │
│ conversations.forEach(convPlan => {  │
│   - createConversation()            │
│   - convPlan.todos.forEach(todo => {│
│       createTodo()                  │
│   })                                │
│ })                                  │
└─────────────────────────────────────┘
    ↓
Top Bar 초기화 (플랜 요약 표시)
    ↓
유저가 Conversation 선택 & Todo 실행
    ↓
Todo 완료 시마다:
  - DB 업데이트
  - Top Bar 진행도 업데이트
  - 다음 Conversation 제안 (optional)
    ↓
전체 완료
  - Top Bar "완료!" 표시
  - 플랜 히스토리로 이동
```

---

## 미래 확장성

### v2 기능 대비

**의존성 시각화:**
```
[Modal에 추가 탭]

  [Overview] [Dependencies] [Timeline]
              ↑
              클릭

┌───────────────────────────────────────────────┐
│ Dependency Graph                              │
│                                               │
│   ┌──────────┐                                │
│   │ DB 스키마 │                                │
│   └─────┬────┘                                │
│         │                                     │
│         ├──────────┐                          │
│         ↓          ↓                          │
│   ┌─────────┐  ┌──────────┐                  │
│   │백엔드 API│  │프론트 UI │                  │
│   └────┬────┘  └────┬─────┘                  │
│        │            │                         │
│        └──────┬─────┘                         │
│               ↓                               │
│         ┌──────────┐                          │
│         │  테스트  │                          │
│         └──────────┘                          │
│                                               │
│ Legend:                                       │
│ ✓ 완료  ▶ 진행 중  □ 대기  ⚠ 차단됨          │
└───────────────────────────────────────────────┘
```

**Gantt Chart:**
```
┌───────────────────────────────────────────────┐
│ Timeline View                                 │
│                                               │
│ DB 스키마   ████░░░░░░░░░░░░░░░░              │
│ 백엔드 API       ░░██████████░░░░             │
│ 프론트 UI   ████████████░░░░░░░░              │
│ 테스트                    ░░░░████            │
│ ├─────┼─────┼─────┼─────┼─────┤             │
│ 0h    1h    2h    3h    4h    5h            │
│                                               │
│ Critical Path: DB → 백엔드 → 테스트 (4h)      │
└───────────────────────────────────────────────┘
```

---

## 마무리

이 UI 설계는:
- ✅ 현재 Octave 구조에 자연스럽게 통합
- ✅ Progressive disclosure로 복잡도 관리
- ✅ Cursor, Linear, Notion의 장점 통합
- ✅ v2 확장 대비 (의존성, Orchestrator)
- ✅ 2-4주 안에 구현 가능

**다음 단계:**
1. 프로토타입 구현 (Modal + Top Bar)
2. 사용자 테스트
3. 피드백 반영
4. 점진적 기능 추가
